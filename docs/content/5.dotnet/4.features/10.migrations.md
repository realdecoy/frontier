# Migrations

### What is it about?
The workflow of migrations allowws you to manage changes to the data schema over time. Typically this involves making changes to the entities or the database context, creating a new migration, then applying the migration update the database schema or revert if needed.

### Examples

**Creating migration files**
```bash
frontier dotnet migrate new [name-of-migration] 
```

Abstracts:
```bash
dotnet ef migrations add ${migrationName}\
  --context ${projectName}DbContext\
  --startup-project src/${projectName}.Api/${projectName}.Api.csproj\
  --project src/${projectName}.Persistence/${projectName}.Persistence.csproj
```

Description: This migration creates a new migration file reflecting any updates/modifications to classes representing database tables. The new migration fil can be located at projectName/src/projectNameApi.Persistence/migrations.
<br>
<br>

**Apply Migration Update**
```bash
frontier dotnet migrate up
```

Abstrcts:
```bash
dotnet ef database update --context ${projectName}DbContext\
  --startup-project src/${projectName}.Api/${projectName}.Api.csproj\
  --configuration ${configuration}\
  --project src/${projectName}.Persistence/${projectName}.Persistence.csproj
```

Desctiption: This command used to apply pending migrations to the database.
<br>
<br>


**Revert Migration** 
```bash
frontier dotnet migrate down [name-of-migration]
```

Abstracts:
```bash
dotnet ef database update ${migrationName} 
  --context ${projectName}DbContext\
  --startup-project src/${projectName}.Api/${projectName}.Api.csproj\
  --configuration ${configuration}\
  --project src/${projectName}.Persistence/${projectName}.Persistence.csproj
```

Description: This migration command reverts databse to a previous specified maigration.
<br>

**Remove Migration**
```bash
frontier dotnet migrate remove 
```
```bash
dotnet ef migrations remove 
  --context ${projectName}DbContext\
  --startup-project src/${projectName}.Api/${projectName}.Api.csproj\
  --configuration ${configuration}\
  --project src/${projectName}.Persistence/${projectName}.Persistence.csproj
```

Descriptions: This command is helpful when you want to undo the last migration and remove the changes it introduced from the database schema.
<br>