{"parsed":{"_path":"/rdvue/scaffilding/sitemap","_dir":"scaffilding","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Sitemap","description":"A sitemap file is useful for helping Google to better index your website, ensuring that the content you write can be visible in search results.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"sitemap"},"children":[{"type":"text","value":"Sitemap"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A sitemap file is useful for helping Google to better index your website, ensuring that the content you write can be visible in search results."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This can be created by utilising the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sitemap"}]},{"type":"text","value":" library, which can be installed as follows:"}]},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"code","props":{"code":"pnpm add --save-dev sitemap\n","filename":"pnpm","language":"bash","meta":"[pnpm]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"pnpm"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2c495"},"children":[{"type":"text","value":"--save-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"sitemap"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"yarn add --dev sitemap\n","filename":"yarn","language":"bash","meta":"[yarn]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"add"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2c495"},"children":[{"type":"text","value":"--dev"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"sitemap"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"npm install --save-dev sitemap\n","filename":"npm","language":"bash","meta":"[npm]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2c495"},"children":[{"type":"text","value":"--save-dev"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"sitemap"}]}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"server-route"},"children":[{"type":"text","value":"Server Route"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We will be utilising the "},{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/guide/directory-structure/server#server-routes","rel":["nofollow"]},"children":[{"type":"text","value":"server routes"}]},{"type":"text","value":" available within Nuxt, and to do so you'll need to create the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"server/"}]},{"type":"text","value":" directory within your website's root directly."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once this is done, create a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"routes/"}]},{"type":"text","value":" directory inside this, and add a "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"sitemap.xml.ts"}]},{"type":"text","value":" file, this will translate to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"/sitemap.xml"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You'll need to add the following:"}]},{"type":"element","tag":"code","props":{"code":"import { serverQueryContent } from '#content/server'\r\nimport { SitemapStream, streamToPromise } from 'sitemap'\r\n\r\nexport default defineEventHandler(async (event) => {\r\n  // Fetch all documents\r\n  const docs = await serverQueryContent(event).find()\r\n  const sitemap = new SitemapStream({\r\n    hostname: 'https://example.com'\r\n  })\r\n\r\n  for (const doc of docs) {\r\n    sitemap.write({\r\n      url: doc._path,\r\n      changefreq: 'monthly'\r\n    })\r\n  }\r\n  sitemap.end()\r\n\r\n  return streamToPromise(sitemap)\r\n})\n","filename":"server/routes/sitemap.xml.ts","language":"ts","meta":"[server/routes/sitemap.xml.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" { serverQueryContent } "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"'#content/server'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" { SitemapStream, streamToPromise } "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"'sitemap'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"defineEventHandler"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":" (event) "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"{"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-501c65"},"children":[{"type":"text","value":"// Fetch all documents"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2c495"},"children":[{"type":"text","value":"docs"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"serverQueryContent"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"(event)."}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2c495"},"children":[{"type":"text","value":"sitemap"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"SitemapStream"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"    hostname: "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"'https://example.com'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-a2c495"},"children":[{"type":"text","value":"doc"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" docs) {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"    sitemap."}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"write"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"      url: doc._path,"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"      changefreq: "}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"'monthly'"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"    })"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  sitemap."}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"streamToPromise"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"(sitemap)"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":")"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now, once users go to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://example.com/sitemap.xml"}]},{"type":"text","value":", you'll find the generated XML file with all your pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When using "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":", you may want to pre-render the sitemap since the server route won't be able to run on a static hosting."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can do this using the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nitro.prerender"}]},{"type":"text","value":" option in your "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"export default defineNuxtConfig({\r\n  // ...\r\n  nitro: {\r\n    prerender: {\r\n      routes: ['/sitemap.xml']\r\n    }\r\n  }\r\n})\n","filename":"nuxt.config.ts","language":"ts","meta":"[nuxt.config.ts]"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-0c7e9b"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f23d1c"},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-501c65"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"nitro: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"    prerender: {"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"      routes: ["}]},{"type":"element","tag":"span","props":{"class":"ct-04721a"},"children":[{"type":"text","value":"'/sitemap.xml'"}]},{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"]"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-05b18d"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"div","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-6b2c4f"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-501c65{color:#6E7781}\n.ct-f23d1c{color:#8250DF}\n.ct-0c7e9b{color:#CF222E}\n.ct-a2c495{color:#0550AE}\n.ct-04721a{color:#0A3069}\n.ct-05b18d{color:#24292F}\n.ct-6b2c4f{color:#953800}\n.dark .ct-6b2c4f{color:#FFA657}\n.dark .ct-05b18d{color:#C9D1D9}\n.dark .ct-04721a{color:#A5D6FF}\n.dark .ct-a2c495{color:#79C0FF}\n.dark .ct-0c7e9b{color:#FF7B72}\n.dark .ct-f23d1c{color:#D2A8FF}\n.dark .ct-501c65{color:#8B949E}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"server-route","depth":2,"text":"Server Route"}]}},"_type":"markdown","_id":"content:3.rdvue:3.scaffilding:1.sitemap.md","_source":"content","_file":"3.rdvue/3.scaffilding/1.sitemap.md","_extension":"md"},"hash":"oz9Z9hWXL0"}